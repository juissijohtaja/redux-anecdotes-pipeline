(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{37:function(e,t,n){e.exports=n(66)},66:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(15),o=n.n(c),i=n(9),u=n(2),l=n.n(u),s=n(5),f=n(36),d=n(14),p=n.n(d),v={getAll:function(){var e=Object(s.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("/anecdotes");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),createNew:function(){var e=Object(s.a)(l.a.mark(function e(t){var n,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={content:t,votes:0},e.next=3,p.a.post("/anecdotes",n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),updateContent:function(){var e=Object(s.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.put("".concat("/anecdotes","/").concat(t.id),t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),removeContent:function(){var e=Object(s.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.delete("".concat("/anecdotes","/").concat(t.id));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(console.log("state now: ",e),console.log("action",t),t.type){case"NEW_ANECDOTE":return[].concat(Object(f.a)(e),[t.data]);case"INIT_ANECDOTES":return t.data;case"DELETE_ANECDOTE":var n=t.data.id;return e.filter(function(e){return e.id!==n});case"VOTE":var r=t.data,a=t.data.id;return e.map(function(e){return e.id!==a?e:r});default:return e}},m=function(e){return console.log("notificationChange launched",e),{type:"SET_NOTIFICATION",notification:e}},h=function(e,t){return console.log("notificationSetter launched"),console.log("notification timeOut in seconds:",t),function(){var n=Object(s.a)(l.a.mark(function n(r){return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r(m(e)),setTimeout(function(){r((console.log("notificationClear launched"),{type:"CLEAR_NOTIFICATION",notification:null})),console.log("notification cleared")},1e3*t);case 2:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NOTIFICATION":case"CLEAR_NOTIFICATION":return t.notification;default:return e}},O={createAnecdote:function(e){return function(){var t=Object(s.a)(l.a.mark(function t(n){var r;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.createNew(e);case 2:r=t.sent,n({type:"NEW_ANECDOTE",data:r});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},notificationSet:h},g=Object(i.b)(null,O)(function(e){var t=function(){var t=Object(s.a)(l.a.mark(function t(n){var r;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),r=n.target.anecdote.value,n.target.anecdote.value="",e.createAnecdote(r),e.notificationSet("Anectode added",3);case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();return a.a.createElement("form",{onSubmit:t},a.a.createElement("input",{name:"anecdote"}),a.a.createElement("button",{type:"submit"},"add"))}),w=function(e){var t=e.anecdote,n=e.handleVote,r=e.handleDelete;return a.a.createElement("li",{key:t.id},a.a.createElement("div",null,t.content),a.a.createElement("div",null,"has ",t.votes,a.a.createElement("button",{onClick:n},"vote"),a.a.createElement("button",{onClick:r},"delete")))},C=function(e){var t=e.anecdotes,n=e.filter;return t.filter(function(e){return e.content.toLowerCase().includes(n.toLowerCase())}).sort(function(e,t){return t.votes-e.votes})},T={addVote:function(e){return function(){var t=Object(s.a)(l.a.mark(function t(n){var r;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.votes+=1,t.next=3,v.updateContent(e);case 3:r=t.sent,console.log("updatedAnecdote",r),n({type:"VOTE",data:r});case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},deleteAnecdote:function(e){return function(){var t=Object(s.a)(l.a.mark(function t(n){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("content to delete",e),t.next=3,v.removeContent(e);case 3:n({type:"DELETE_ANECDOTE",data:e});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},notificationSet:h},y=Object(i.b)(function(e){return console.log("STATE",e),{visibleAnecdotes:C(e)}},T)(function(e){return a.a.createElement("ul",null,e.visibleAnecdotes.map(function(t){return a.a.createElement(w,{key:t.id,anecdote:t,handleVote:function(){e.addVote(t),e.notificationSet("You voted '".concat(t.content,"'"),3)},handleDelete:function(){e.deleteAnecdote(t),e.notificationSet("You deleted '".concat(t.content,"'"),3)}})}))}),A=Object(i.b)(function(e){return console.log(e),{notification:e.notification}})(function(e){var t=e.notification;return a.a.createElement("div",null,null===t?null:a.a.createElement("div",{style:{border:"solid",padding:10,borderWidth:1,marginBottom:20,backgroundColor:"green",color:"white"}},t))}),I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_FILTER":case"CLEAR_FILTER":return t.filter;default:return e}},j={filterChange:function(e){return{type:"SET_FILTER",filter:e}},filterClear:function(){return{type:"CLEAR_FILTER",filter:""}}},k=Object(i.b)(function(e){return console.log(e),{filter:e.filter}},j)(function(e){return a.a.createElement("div",{style:{marginBottom:10}},"filter ",a.a.createElement("input",{id:"anecdoteFilter",onChange:function(t){t.preventDefault();var n=t.target.value;e.filterChange(n)}}),a.a.createElement("button",{onClick:function(){return e.filterClear(),console.log("CLEAR FILTER",e.filter),void(document.getElementById("anecdoteFilter").value=e.filter)}},"Clear filter"))}),N=n(32),x=n(3),S=Object(i.b)(null,{initializeAnecdotes:function(){return function(){var e=Object(s.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.getAll();case 2:n=e.sent,t({type:"INIT_ANECDOTES",data:n});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}})(function(e){return Object(r.useEffect)(function(){e.initializeAnecdotes()},[e]),a.a.createElement(N.a,null,a.a.createElement(x.c,null,a.a.createElement(x.a,{path:"/health"},a.a.createElement("p",null,"ok")),a.a.createElement(x.a,{path:"/version"},a.a.createElement("p",null,"1")),a.a.createElement(x.a,{path:"/"},a.a.createElement("div",null,a.a.createElement("h2",null,"Anecdotes Kokkeli"),a.a.createElement(k,null),a.a.createElement(A,null),a.a.createElement(g,null),a.a.createElement(y,null)))))}),L=n(11),_=n(34),D=n(35),F=Object(L.combineReducers)({anecdotes:E,filter:I,notification:b}),R=Object(L.createStore)(F,Object(D.composeWithDevTools)(Object(L.applyMiddleware)(_.a)));o.a.render(a.a.createElement(i.a,{store:R},a.a.createElement(S,null)),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.16c784d3.chunk.js.map